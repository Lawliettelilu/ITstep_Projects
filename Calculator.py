# 2.1 рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃў
# рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃљрЃФрЃџрЃћрЃЋрЃА рЃерЃћрЃљрЃАрЃарЃБрЃџрЃЮрЃю рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃљрЃарЃўрЃЌрЃЏрЃћрЃбрЃўрЃЎрЃБрЃџрЃў рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃћрЃЉрЃў (+, -, *, /).
#  рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃА рЃерЃћрЃБрЃФрЃџрЃўрЃљрЃЌ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃЮрЃю рЃЮрЃарЃў рЃарЃўрЃфрЃ«рЃЋрЃў рЃЊрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњ рЃљрЃўрЃарЃЕрЃўрЃЮрЃю рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃљ рЃерЃћрЃЊрЃћрЃњрЃўрЃА рЃЏрЃўрЃАрЃљрЃдрЃћрЃЉрЃљрЃЊ. 
# рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃў рЃљрЃАрЃћрЃЋрЃћ рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљрЃА рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃерЃћрЃДрЃЋрЃљрЃюрЃћрЃЉрЃўрЃА рЃЊрЃљрЃАрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃџрЃљрЃЊ.

import math

# рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        raise ZeroDivisionError("рЃњрЃљрЃБрЃДрЃЮрЃцрЃћрЃџрЃЮрЃЉрЃљ рЃюрЃБрЃџрЃќрЃћ рЃерЃћрЃБрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ!")
    return a / b

def power(a, b):
    return a ** b

def modulo(a, b):
    if b == 0:
        raise ZeroDivisionError("рЃюрЃБрЃџрЃќрЃћ рЃњрЃљрЃДрЃЮрЃцрЃўрЃА рЃюрЃљрЃерЃЌрЃў рЃерЃћрЃБрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ!")
    return a % b

def square_root(a):
    if a < 0:
        raise ValueError("рЃБрЃљрЃарЃДрЃЮрЃцрЃўрЃЌрЃў рЃарЃўрЃфрЃ«рЃЋрЃўрЃА рЃцрЃћрЃАрЃЋрЃў рЃерЃћрЃБрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ!")
    return math.sqrt(a)

# рЃфрЃўрЃцрЃарЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ
def get_number(prompt):
    while True:
        try:
            return float(input(prompt))
        except ValueError:
            print(" рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃЮрЃЌ рЃарЃўрЃфрЃ«рЃЋрЃў, рЃАрЃ«рЃЋрЃљ рЃАрЃўрЃЏрЃЉрЃЮрЃџрЃЮ рЃЏрЃўрЃБрЃдрЃћрЃЉрЃћрЃџрЃўрЃљ.")

# рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃўрЃА рЃљрЃарЃЕрЃћрЃЋрЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ
def get_operation():
    print("\nрЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў:")
    print("  1. рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ (+)")
    print("  2. рЃњрЃљрЃЏрЃЮрЃЎрЃџрЃћрЃЉрЃљ (-)")
    print("  3. рЃњрЃљрЃЏрЃарЃљрЃЋрЃџрЃћрЃЉрЃљ (*)")
    print("  4. рЃњрЃљрЃДрЃЮрЃцрЃљ (/)")
    print("  5. рЃ«рЃљрЃарЃўрЃАрЃ«рЃў (^)")
    print("  6. рЃюрЃљрЃерЃЌрЃў (%)")
    print("  7. рЃЎрЃЋрЃљрЃЊрЃарЃљрЃбрЃБрЃџрЃў рЃцрЃћрЃАрЃЋрЃў (Рѕџ)")
    
    operations_map = {
        '1': '+',
        '2': '-',
        '3': '*',
        '4': '/',
        '5': '^',
        '6': '%',
        '7': 'Рѕџ'
    }
    
    while True:
        choice = input("\nрЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃўрЃА рЃюрЃЮрЃЏрЃћрЃарЃў: ")
        
        if choice == '1':
            return '+'
        elif choice == '2':
            return '-'
        elif choice == '3':
            return '*'
        elif choice == '4':
            return '/'
        elif choice == '5':
            return '^'
        elif choice == '6':
            return '%'
        elif choice == '7':
            return 'Рѕџ'
        else:
            print(" рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃљрЃарЃЕрЃћрЃЋрЃљрЃюрЃў. рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃљрЃўрЃарЃЕрЃўрЃЮрЃЌ 1-рЃЊрЃљрЃю 7-рЃЏрЃЊрЃћ.")

# рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ
def calculator():
    print("=" * 50)
    print("    рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃў ")
    print("=" * 50)
    
    history = []  # рЃўрЃАрЃбрЃЮрЃарЃўрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃўрЃА рЃАрЃўрЃљ
    
    while True:
        print("\n" + "-" * 50)
        
         # рЃЎрЃЋрЃљрЃЊрЃарЃљрЃбрЃБрЃџрЃў рЃцрЃћрЃАрЃЋрЃўрЃАрЃЌрЃЋрЃўрЃА рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃћрЃарЃЌрЃў рЃарЃўрЃфрЃ«рЃЋрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ
        operation = get_operation()
        
        if operation == 'Рѕџ':
            num1 = get_number("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃарЃўрЃфрЃ«рЃЋрЃў: ")
            try:
                result = square_root(num1)
                calculation = f"Рѕџ{num1} = {result}"
                print(f"\n рЃерЃћрЃЊрЃћрЃњрЃў: {result}")
            except ValueError as e:
                print(f"\n рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {e}")
                continue
        else:
            # рЃДрЃЋрЃћрЃџрЃљ рЃАрЃ«рЃЋрЃљ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃАрЃљрЃЌрЃЋрЃўрЃА рЃЮрЃарЃў рЃарЃўрЃфрЃ«рЃЋрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ
            num1 = get_number("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃарЃўрЃфрЃ«рЃЋрЃў: ")
            num2 = get_number("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃЏрЃћрЃЮрЃарЃћ рЃарЃўрЃфрЃ«рЃЋрЃў: ")
            
            # рЃЊрЃўрЃЦрЃерЃћрЃюрЃћрЃарЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃљрЃАрЃЮрЃфрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
            operations_dict = {
                '+': add,
                '-': subtract,
                '*': multiply,
                '/': divide,
                '^': power,
                '%': modulo
            }
            
            # рЃерЃћрЃЊрЃћрЃњрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ
            try:
                result = operations_dict[operation](num1, num2)
                calculation = f"{num1} {operation} {num2} = {result}"
                print(f"\n рЃерЃћрЃЊрЃћрЃњрЃў: {result}")
            except (ZeroDivisionError, ValueError) as e:
                print(f"\n рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {e}")
                continue
        
        # рЃўрЃАрЃбрЃЮрЃарЃўрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ
        history.append(calculation)
        
        # рЃЎрЃўрЃЌрЃ«рЃЋрЃљ рЃЋрЃљрЃЕрЃЋрЃћрЃюрЃЮрЃЌ рЃўрЃАрЃбрЃЮрЃарЃўрЃљ рЃЌрЃБ рЃљрЃарЃљ
        if len(history) > 1:
            view_history = input("\n рЃўрЃ«рЃўрЃџрЃЮрЃЌ рЃўрЃАрЃбрЃЮрЃарЃўрЃљ? (рЃЎрЃў/рЃљрЃарЃљ): ").lower()
            if view_history in ['рЃЎрЃў', 'k', 'yes', 'y']:
                print("\n" + "=" * 50)
                print(" рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃћрЃЉрЃўрЃА рЃўрЃАрЃбрЃЮрЃарЃўрЃљ:")
                print("=" * 50)
                for i, calc in enumerate(history, 1):
                    print(f"  {i}. {calc}")
                print("=" * 50)
        
        # рЃЎрЃўрЃЌрЃ«рЃЋрЃљ рЃњрЃљрЃњрЃарЃФрЃћрЃџрЃћрЃЉрЃљрЃќрЃћ
        continue_calc = input("\nрЃњрЃАрЃБрЃарЃЌ рЃАрЃ«рЃЋрЃљ рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ? (рЃЎрЃў/рЃљрЃарЃљ): ").lower()
        if continue_calc not in ['рЃЎрЃў', 'k', 'yes', 'y']:
            print("\n" + "=" * 50)
            print("   рЃњрЃЏрЃљрЃЊрЃџрЃЮрЃЉрЃЌ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА! ­ЪЉІ")
            print("=" * 50)
            break

# рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЏрЃљрЃерЃўрЃю рЃарЃЮрЃфрЃљ рЃцрЃљрЃўрЃџрЃў рЃърЃўрЃарЃЊрЃљрЃърЃўрЃарЃў рЃњрЃќрЃўрЃЌ рЃљрЃарЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃБрЃџрЃў
if __name__ == "__main__":
    calculator()